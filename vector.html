<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Croatia Vector Tiles</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet"/>
<style>
  body, html { margin: 0; padding: 0; height: 100%; }
  #map { width: 100%; height: 90%; }
  #controls { height: 10%; padding: 10px; background: #f5f5f5; }
  button { padding: 8px 12px; margin: 5px; cursor: pointer; }
</style>
</head>
<body>

<div id="map"></div>
<div id="controls">
  <button id="toggleWater">Toggle Water</button>
  <button id="toggleRoads">Toggle Roads</button>
  <button id="toggleBuildings">Toggle Buildings</button>
  <span id="status">Loading...</span>
</div>

<script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
<script>
const map = new maplibregl.Map({
  container: 'map',
  style: {
    version: 8,
    sources: {
      croatia: {
        type: 'vector',
        tiles: ['http://localhost:8080/tiles/{z}/{x}/{y}.pbf'],
        minzoom: 0,
        maxzoom: 14
      }
    },
    layers: [{
      id: 'background',
      type: 'background',
      paint: {'background-color': '#f8f4f0'}
    }]
  },
  center: [15.2, 45.1],
  zoom: 7
});

map.on('load', () => {
  // Add water layer
  map.addLayer({
    id: 'water',
    type: 'fill',
    source: 'croatia',
    'source-layer': 'water',
    paint: {
      'fill-color': '#a0c8f0'
    }
  });

  // Add roads layer
  map.addLayer({
    id: 'roads',
    type: 'line',
    source: 'croatia',
    'source-layer': 'transportation',
    paint: {
      'line-color': '#ff0000',
      'line-width': 2
    }
  });

  // Add buildings layer
  map.addLayer({
    id: 'buildings',
    type: 'fill',
    source: 'croatia',
    'source-layer': 'building',
    paint: {
      'fill-color': '#f2eae2',
      'fill-outline-color': '#dfdbd7'
    }
  });

  document.getElementById('status').textContent = 'Map loaded successfully';
});

// Add toggle functionality
document.getElementById('toggleWater').onclick = () => {
  const visibility = map.getLayoutProperty('water', 'visibility');
  map.setLayoutProperty('water', 'visibility', visibility === 'visible' ? 'none' : 'visible');
};

document.getElementById('toggleRoads').onclick = () => {
  const visibility = map.getLayoutProperty('roads', 'visibility');
  map.setLayoutProperty('roads', 'visibility', visibility === 'visible' ? 'none' : 'visible');
};

document.getElementById('toggleBuildings').onclick = () => {
  const visibility = map.getLayoutProperty('buildings', 'visibility');
  map.setLayoutProperty('buildings', 'visibility', visibility === 'visible' ? 'none' : 'visible');
};
</script>
</body>
</html>